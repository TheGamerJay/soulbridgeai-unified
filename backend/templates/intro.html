<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Welcome to SoulBridge AI</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/favicon-512x512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <meta name="theme-color" content="#00ffff">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="SoulBridge AI - Your Journey to Emotional Wellness">
    <meta property="og:description" content="Connect with AI companions designed for healing, growth, and spiritual guidance. Start your transformative journey today.">
    <meta property="og:image" content="{{ url_for('static', filename='logos/New IntroLogo.png', _external=True) }}">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="SoulBridge AI">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="SoulBridge AI - Your Journey to Emotional Wellness">
    <meta name="twitter:description" content="Connect with AI companions designed for healing, growth, and spiritual guidance">
    <meta name="twitter:image" content="{{ url_for('static', filename='logos/New IntroLogo.png', _external=True) }}">
    
    <!-- CRITICAL: Block rendering until intro styles are ready -->
    <style>
        /* Prevent flash during loading */
        html { opacity: 0; transition: opacity 0.3s ease; }
        html.ready { opacity: 1; }
        
        /* ULTRA CRITICAL: Beautiful black background with cyan accents */
        html, body {
            background: #000000 !important;
            background-attachment: fixed !important;
            background-size: 100% 100% !important;
        }
        
        /* CRITICAL: Intro page styling MUST load first */
        body, body.intro-page {
            background: #000000 !important;
            background-attachment: fixed !important;
            background-size: 100% 100% !important;
            min-height: 100vh !important;
            margin: 0 !important;
            padding: 0 !important;
            font-family: system-ui, -apple-system, sans-serif !important;
            color: #00ffff !important;
        }
        
        /* Force override any conflicting CSS */
        .intro-page {
            background: #000000 !important;
        }
    </style>
    <!-- Load CSS normally but override background only -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/themes.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tier-lock.css') }}">
    
    <!-- IMMEDIATE styling script - runs before anything else -->
    <script>
        (function() {
            const gradient = 'linear-gradient(135deg, #0a0e1a 0%, #1a202c 25%, #2d3748 50%, #1a202c 75%, #0a0e1a 100%)';
            document.documentElement.style.background = gradient + ' !important';
            document.documentElement.style.backgroundAttachment = 'fixed';
            document.documentElement.style.backgroundSize = '100% 100%';
        })();
    </script>
    
    <style>
        /* Professional CSS Architecture with Design Tokens */
        :root {
            --primary-cyan: #00ffff;
            --primary-dark: #0a0e1a;
            --secondary-dark: #1a202c;
            --gradient-primary: linear-gradient(135deg, #00ffff 0%, #0099cc 100%);
            --gradient-hero: linear-gradient(135deg, #000000 0%, #0a0e1a 50%, #1a202c 100%);
            --shadow-glow: 0 8px 32px rgba(0, 255, 255, 0.2);
            --shadow-glow-hover: 0 12px 40px rgba(0, 255, 255, 0.3);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
            --spacing-xxl: 4rem;
        }

        /* Enhanced intro page with professional background */
        body {
            background: var(--gradient-hero) !important;
            background-attachment: fixed !important;
            min-height: 100vh !important;
            position: relative !important;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        
        /* Professional animated background with floating particles */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 255, 255, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 255, 255, 0.06) 0%, transparent 45%),
                radial-gradient(circle at 40% 80%, rgba(0, 255, 255, 0.04) 0%, transparent 35%),
                radial-gradient(circle at 70% 20%, rgba(0, 255, 255, 0.05) 0%, transparent 40%);
            pointer-events: none;
            z-index: -2;
            animation: breathe 6s ease-in-out infinite alternate;
        }

        /* Floating particles animation */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(1px 1px at 20px 30px, rgba(0, 255, 255, 0.3), transparent),
                radial-gradient(1px 1px at 40px 70px, rgba(0, 255, 255, 0.2), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(0, 255, 255, 0.25), transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(0, 255, 255, 0.15), transparent);
            background-repeat: repeat;
            background-size: 200px 200px;
            animation: float 20s infinite linear;
            pointer-events: none;
            z-index: -1;
            opacity: 0.6;
        }
        
        @keyframes breathe {
            0% { opacity: 0.4; transform: scale(1); }
            100% { opacity: 0.8; transform: scale(1.02); }
        }

        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-10px) rotate(120deg); }
            66% { transform: translateY(5px) rotate(240deg); }
            100% { transform: translateY(0px) rotate(360deg); }
        }
        
        /* Modern Hero Section */
        .hero-section {
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: var(--spacing-xl) var(--spacing-lg);
            margin-top: 80px; /* Account for navigation */
        }

        .hero-content {
            text-align: center;
            max-width: 800px;
            animation: fadeInUp 1s ease-out;
        }

        .hero-logo {
            width: clamp(280px, 30vw, 400px);
            height: auto;
            margin-bottom: var(--spacing-lg);
            filter: drop-shadow(var(--shadow-glow));
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .hero-logo:hover {
            transform: scale(1.05);
            filter: drop-shadow(var(--shadow-glow-hover));
        }

        .hero-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--spacing-md);
            line-height: 1.1;
            letter-spacing: -0.02em;
        }

        .hero-subtitle {
            font-size: clamp(1.1rem, 2vw, 1.3rem);
            color: rgba(255, 255, 255, 0.8);
            max-width: 600px;
            line-height: 1.6;
            margin: 0 auto var(--spacing-xl) auto;
            font-weight: 400;
        }

        .hero-cta {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: var(--spacing-xxl);
        }

        .primary-cta, .secondary-cta {
            border: none;
            border-radius: var(--radius-lg);
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-md) var(--spacing-xl);
        }

        .primary-cta {
            background: var(--gradient-primary);
            color: #000;
            box-shadow: var(--shadow-glow);
        }

        .primary-cta:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow-hover);
            color: #000;
        }

        .secondary-cta {
            background: rgba(255, 255, 255, 0.1);
            color: var(--primary-cyan);
            border: 1px solid rgba(0, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        .secondary-cta:hover {
            background: rgba(0, 255, 255, 0.1);
            border-color: var(--primary-cyan);
            color: #fff;
        }

        /* Modern container for content sections */
        .content-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-lg) var(--spacing-xxl) var(--spacing-lg);
        }

        /* Animation keyframes */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .hero-section {
                min-height: 70vh;
                padding: var(--spacing-lg) var(--spacing-md);
                margin-top: 60px;
            }

            .hero-logo {
                width: clamp(200px, 50vw, 280px);
                margin-bottom: var(--spacing-md);
            }

            .hero-title {
                font-size: clamp(2rem, 8vw, 2.5rem);
                margin-bottom: var(--spacing-sm);
            }

            .hero-subtitle {
                font-size: 1rem;
                margin-bottom: var(--spacing-lg);
            }

            .hero-cta {
                flex-direction: column;
                gap: var(--spacing-sm);
            }

            .primary-cta, .secondary-cta {
                width: 100%;
                max-width: 280px;
                justify-content: center;
            }

            .content-container {
                padding: 0 var(--spacing-md) var(--spacing-lg) var(--spacing-md);
            }
        }

        @media (max-width: 480px) {
            .hero-section {
                min-height: 60vh;
                padding: var(--spacing-md) var(--spacing-sm);
            }

            .hero-title {
                font-size: 1.8rem;
            }

            .hero-subtitle {
                font-size: 0.9rem;
            }

            .companion-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-md);
            }

            .action-buttons {
                flex-direction: column;
                max-width: 280px;
                margin-left: auto;
                margin-right: auto;
            }

            .action-btn {
                width: 100%;
                justify-content: center;
            }
        }
        
        /* Modern Companion Cards */
        .companions-section {
            margin: var(--spacing-xxl) 0;
        }

        .section-title {
            font-size: clamp(2rem, 4vw, 2.5rem);
            font-weight: 600;
            text-align: center;
            margin-bottom: var(--spacing-md);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: var(--spacing-xl);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .companion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .companion-card {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(0, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .companion-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(0, 255, 255, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .companion-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary-cyan);
            box-shadow: var(--shadow-glow-hover);
        }

        .companion-card:hover::before {
            opacity: 1;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .companion-avatar {
            width: 60px;
            height: 60px;
            border: 2px solid var(--primary-cyan);
            object-fit: contain;
            flex-shrink: 0;
        }

        .companion-info h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #fff;
            margin-bottom: var(--spacing-xs);
        }

        .tier-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tier-badge.bronze {
            background: linear-gradient(135deg, #cd7f32, #b8860b);
            color: #fff;
        }

        .tier-badge.silver {
            background: linear-gradient(135deg, #c0c0c0, #a8a8a8);
            color: #000;
        }

        .tier-badge.gold {
            background: linear-gradient(135deg, #ffd700, #ffb700);
            color: #000;
        }

        .card-body p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: var(--spacing-md);
        }

        .features-list {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-xs);
            margin-bottom: var(--spacing-lg);
        }

        .feature {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 0.85rem;
            color: var(--primary-cyan);
        }


        .learn-more {
            background: transparent;
            color: var(--primary-cyan);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm) var(--spacing-md);
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
        }

        .learn-more:hover {
            background: rgba(0, 255, 255, 0.1);
            border-color: var(--primary-cyan);
        }

        /* Action Buttons Section */
        .action-buttons {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            flex-wrap: wrap;
            margin: var(--spacing-xl) 0;
        }

        .action-btn {
            background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: var(--radius-md);
            padding: var(--spacing-md) var(--spacing-lg);
            color: var(--primary-cyan);
            font-weight: 600;
            font-size: 1.1rem;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
            box-shadow: 0 4px 20px rgba(255, 0, 0, 0.3);
        }

        .action-btn:hover {
            transform: translateY(-3px);
            border-color: rgba(0, 255, 255, 0.6);
            box-shadow: 0 8px 30px rgba(255, 0, 0, 0.5);
            color: var(--primary-cyan);
        }

        .action-btn.primary {
            background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
            border: none;
            box-shadow: 0 8px 30px rgba(255, 0, 0, 0.5);
            text-shadow: 0 0 8px rgba(0, 255, 255, 0.6);
        }

        .action-btn.primary:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 15px 40px rgba(255, 0, 0, 0.7);
        }

        /* Enhanced cards with beautiful cyan glow */
        .card {
            background: rgba(0, 0, 0, 0.9) !important;
            backdrop-filter: blur(20px) !important;
            border: 2px solid rgba(0, 255, 255, 0.3) !important;
            transition: all 0.3s ease !important;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.1) !important;
        }
        
        .card:hover {
            transform: translateY(-5px) !important;
            border-color: rgba(0, 255, 255, 0.6) !important;
            box-shadow: 0 10px 40px rgba(0, 255, 255, 0.2) !important;
        }
        
        /* Beautiful cyan text styling */
        h1, h2, h3, h4, h5, h6 {
            color: #00ffff !important;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.3) !important;
        }
        
        p {
            color: #00ffff !important;
        }

        /* Add-on button styling */
        .addon-btn {
            background: rgba(15, 23, 42, 0.8) !important;
            border: 2px solid rgba(34, 211, 238, 0.3) !important;
            border-radius: 15px !important;
            padding: 20px !important;
            text-decoration: none !important;
            color: inherit !important;
            transition: all 0.3s ease !important;
            display: block !important;
            backdrop-filter: blur(10px) !important;
        }

        .addon-btn:hover {
            border-color: #22d3ee !important;
            transform: translateY(-5px) !important;
            box-shadow: 0 10px 30px rgba(34, 211, 238, 0.3) !important;
            background: rgba(34, 211, 238, 0.1) !important;
        }

        .addon-icon {
            font-size: 2.5rem !important;
            margin-bottom: 10px !important;
        }

        .addon-title {
            color: #22d3ee !important;
            font-size: 1.2rem !important;
            font-weight: 600 !important;
            margin-bottom: 8px !important;
        }

        .addon-desc {
            color: #94a3b8 !important;
            font-size: 0.9rem !important;
            line-height: 1.4 !important;
        }

        .addon-limit {
            margin-top: 8px;
            padding: 4px 8px;
            background: rgba(34, 211, 238, 0.2);
            border: 1px solid rgba(34, 211, 238, 0.4);
            border-radius: 12px;
            color: #22d3ee;
            font-size: 0.8rem;
            font-weight: 600;
            text-align: center;
        }
        
        /* Security Section Styles */
        .security-section {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(0, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin: var(--spacing-xxl) auto;
            max-width: 800px;
            position: relative;
            overflow: hidden;
        }
        
        .security-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(0, 255, 255, 0.03) 100%);
            pointer-events: none;
        }
        
        .security-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }
        
        .security-icon {
            font-size: 3rem;
            margin-bottom: var(--spacing-md);
            filter: drop-shadow(0 0 10px rgba(0, 255, 255, 0.3));
        }
        
        .security-title {
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: 600;
            color: var(--primary-cyan);
            margin-bottom: var(--spacing-xs);
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }
        
        .security-subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.7);
            margin: 0;
        }
        
        .security-features {
            display: grid;
            gap: var(--spacing-lg);
        }
        
        .security-feature {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
            padding: var(--spacing-md);
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.1);
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .security-feature:hover {
            background: rgba(0, 255, 255, 0.08);
            border-color: rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .feature-icon {
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 10px;
            flex-shrink: 0;
        }
        
        .feature-content {
            flex: 1;
        }
        
        .feature-content h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
            margin: 0 0 var(--spacing-xs) 0;
        }
        
        .feature-content p {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin: 0;
            line-height: 1.5;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 100px 15px 30px 15px;
            }
            
            h1 {
                font-size: 2rem !important;
            }
            
            p {
                font-size: 1rem !important;
            }
            
            .security-section {
                padding: var(--spacing-lg);
                margin: var(--spacing-xl) auto;
            }
            
            .security-icon {
                font-size: 2.5rem;
            }
            
            .security-features {
                gap: var(--spacing-md);
            }
            
            .security-feature {
                padding: var(--spacing-sm);
            }
            
            .feature-icon {
                width: 35px;
                height: 35px;
                font-size: 1.3rem;
            }
        }
        
        /* Enhanced navigation bar with black and cyan theme */
        .top-nav {
            background: rgba(0, 0, 0, 0.95) !important;
            backdrop-filter: blur(20px) !important;
            border-bottom: 2px solid rgba(0, 255, 255, 0.3) !important;
            box-shadow: 0 2px 20px rgba(0, 255, 255, 0.1) !important;
        }
        
        /* Beautiful Sapphire cyan glow animation */
        @keyframes gentleGlow {
            0% { 
                box-shadow: 0 0 30px rgba(0, 255, 255, 0.4);
                transform: scale(1);
            }
            100% { 
                box-shadow: 0 0 50px rgba(0, 255, 255, 0.7);
                transform: scale(1.02);
            }
        }
        
        /* Trial Timer Styles */
        .hidden {
            display: none !important;
        }
        
        @keyframes pulse-cyan {
            0% { box-shadow: 0 0 0 0 rgba(34, 211, 238, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(34, 211, 238, 0); }
            100% { box-shadow: 0 0 0 0 rgba(34, 211, 238, 0); }
        }
        
        /* Trial Badge */
        .trial-badge {
            background: linear-gradient(135deg, #22d3ee, #06b6d4);
            color: #fff;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            animation: pulse-cyan 2s infinite;
            box-shadow: 0 2px 8px rgba(34, 211, 238, 0.3);
        }
    </style>
</head>
<body class="intro-page" style="background: #000000 !important; background-attachment: fixed !important; background-size: 100% 100% !important; min-height: 100vh !important; margin: 0 !important; font-family: system-ui, -apple-system, sans-serif !important; color: #00ffff !important;">
    <!-- Navigation -->
    <div class="top-nav" style="position: fixed; top: 0; left: 0; right: 0; z-index: 1000; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;">
        <!-- 🚀 NEW Enhanced Trial Timer - Beautiful Modern Design -->
        <div id="trial-timer-container" style="display:none; position: fixed; top: 20px; right: 20px; z-index: 1500;">
            <div class="timer-glass-card">
                <div class="timer-glow-ring">
                    <svg width="140" height="140" class="timer-svg">
                        <!-- Background ring -->
                        <circle cx="70" cy="70" r="60" stroke="rgba(0, 255, 255, 0.1)" stroke-width="4" fill="none"/>
                        <!-- Progress ring -->
                        <circle id="timer-progress" cx="70" cy="70" r="60" stroke="url(#timerGradient)" stroke-width="6" fill="none" 
                                stroke-dasharray="377" stroke-dashoffset="0" stroke-linecap="round"
                                style="transform: rotate(-90deg); transform-origin: 50% 50%; transition: stroke-dashoffset 0.5s ease, stroke 0.3s ease;"/>
                        <!-- Gradient Definition -->
                        <defs>
                            <linearGradient id="timerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#00ffff"/>
                                <stop offset="50%" style="stop-color:#00cc88"/>
                                <stop offset="100%" style="stop-color:#0099ff"/>
                            </linearGradient>
                            <linearGradient id="warningGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ffaa00"/>
                                <stop offset="100%" style="stop-color:#ff8800"/>
                            </linearGradient>
                            <linearGradient id="criticalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#ff4444"/>
                                <stop offset="100%" style="stop-color:#cc0000"/>
                            </linearGradient>
                            <filter id="glow">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/> 
                                </feMerge>
                            </filter>
                        </defs>
                    </svg>
                    
                    <!-- Timer Text Content -->
                    <div class="timer-content">
                        <div id="trial-time-text" class="timer-display">5:00:00</div>
                        <div class="timer-label">TRIAL</div>
                        <div class="timer-status">Active</div>
                    </div>
                    
                    <!-- Pulse Animation Ring -->
                    <div class="pulse-ring"></div>
                </div>
            </div>
        </div>

        <style>
        /* 🎨 Beautiful Modern Timer Styles - Intro Page */
        .timer-glass-card {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(15, 23, 42, 0.9) 100%);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 20px;
            padding: 15px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                0 0 30px rgba(0, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .timer-glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.5), transparent);
        }

        .timer-glow-ring {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timer-svg {
            filter: drop-shadow(0 0 10px rgba(0, 255, 255, 0.3));
            animation: timerRotate 20s linear infinite;
        }

        .timer-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
        }

        .timer-display {
            font-size: 18px;
            font-weight: 700;
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
            margin-bottom: 2px;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }

        .timer-label {
            font-size: 10px;
            font-weight: 600;
            color: rgba(0, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 1px;
        }

        .timer-status {
            font-size: 8px;
            color: #00cc88;
            font-weight: 500;
            opacity: 0.8;
            animation: statusPulse 2s ease-in-out infinite;
        }

        .pulse-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 120px;
            height: 120px;
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: pulseRing 3s ease-in-out infinite;
            pointer-events: none;
        }

        /* 🎬 Smooth Animations */
        @keyframes timerRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulseRing {
            0%, 100% { 
                opacity: 0.3; 
                transform: translate(-50%, -50%) scale(1); 
            }
            50% { 
                opacity: 0.1; 
                transform: translate(-50%, -50%) scale(1.1); 
            }
        }

        @keyframes statusPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* 🎯 Responsive Design - Make timer smaller on intro page */
        #trial-timer-container {
            transform: scale(0.75);
            transform-origin: top right;
        }

        @media (max-width: 768px) {
            #trial-timer-container {
                top: 15px;
                right: 15px;
                transform: scale(0.65);
                transform-origin: top right;
            }
            
            .timer-display {
                font-size: 14px;
            }
            
            .timer-svg {
                width: 120px;
                height: 120px;
            }
        }

        /* 🌟 Hover Effects */
        .timer-glass-card:hover {
            border-color: rgba(0, 255, 255, 0.6);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.5),
                0 0 50px rgba(0, 255, 255, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            transition: all 0.3s ease;
        }

        /* 🚨 Warning States */
        .timer-warning #timer-progress {
            stroke: url(#warningGradient) !important;
            animation: warningPulse 1s ease-in-out infinite;
        }

        .timer-critical #timer-progress {
            stroke: url(#criticalGradient) !important;
            animation: criticalPulse 0.5s ease-in-out infinite;
        }

        @keyframes warningPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes criticalPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Simple Timer Styles */
        .trial-status-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .simple-timer {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 12px;
            padding: 4px 8px;
            font-size: 12px;
            font-family: 'Courier New', monospace;
            color: #00ffff;
            font-weight: bold;
            letter-spacing: 0.5px;
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
            opacity: 0.9;
        }
        
        .simple-timer.warning {
            background: rgba(34, 211, 238, 0.15);
            border-color: rgba(34, 211, 238, 0.4);
            color: #22d3ee;
            text-shadow: 0 0 5px rgba(34, 211, 238, 0.5);
        }
        
        .simple-timer.critical {
            background: rgba(255, 69, 69, 0.1);
            border-color: rgba(255, 69, 69, 0.3);
            color: #ff4545;
            text-shadow: 0 0 5px rgba(255, 69, 69, 0.5);
            animation: criticalBlink 1s ease-in-out infinite alternate;
        }
        
        @keyframes criticalBlink {
            0% { opacity: 0.9; }
            100% { opacity: 0.6; }
        }
        </style>
        
        <!-- Right side buttons -->
        <div style="display: flex; gap: 15px; align-items: center;">
            
            <!-- Trial Badge with Simple Timer - Hidden by default, shown by JavaScript when active -->
            <div class="trial-status-container">
                <span class="trial-badge" id="trial-badge" style="display: none;">
                    🕐 Trial Active
                </span>
                <div id="simple-timer" class="simple-timer" style="display: none;">
                    <span id="timer-display">5:00:00</span>
                </div>
            </div>
            <a href="/auth/logout" class="btn-danger">Logout</a>
        </div>
    </div>
    
    <!-- Modern Hero Section -->
    <div class="hero-section">
        <div class="hero-content">
            <img src="{{ url_for('static', filename='logos/New IntroLogo.png') }}" alt="SoulBridge AI Logo" class="hero-logo">
            
            <h1 class="hero-title">Transform Your Inner World</h1>
            
            <p class="hero-subtitle">
                AI-powered companions designed for healing, growth, and spiritual guidance. 
                Connect with empathetic AI that understands your journey.
            </p>
            
            <div class="hero-cta">
                <button class="primary-cta" onclick="window.location.href='/tiers'">
                    🌟 Choose Your AI Companion
                </button>
                <button class="secondary-cta" onclick="toggleNavigationAssistant()">
                    <img src="{{ url_for('static', filename='logos/Sapphire.png') }}" alt="Sapphire" style="width: 32px; height: 32px; object-fit: contain;">
                    Meet Your Guide
                </button>
                <button class="secondary-cta" onclick="window.location.href='/community'">
                    🌍 Community
                </button>
                <button class="secondary-cta" onclick="window.location.href='/profile'" id="hero-profile-button">
                    👤 Profile
                </button>
            </div>
        </div>
    </div>

    <!-- Content Container -->
    <div class="content-container">
        
        <!-- Featured Companions Section -->
        <div class="companions-section">
            <h2 class="section-title">Meet Your AI Companions</h2>
            <p class="section-subtitle">
                Choose from our diverse range of AI companions, each specialized in different aspects of personal growth and healing.
            </p>
            
            <div class="companion-grid">
                <!-- Bronze Tier Companion -->
                <div class="companion-card">
                    <div class="card-header">
                        <img src="{{ url_for('static', filename='logos/Blayzo.png') }}" alt="Blayzo" class="companion-avatar">
                        <div class="companion-info">
                            <h3>Blayzo</h3>
                            <div class="tier-badge bronze">Bronze</div>
                        </div>
                    </div>
                    <div class="card-body">
                        <p>A wise and calm mentor specializing in mindfulness, meditation, and thoughtful guidance through life's challenges.</p>
                        <div class="features-list">
                            <span class="feature">🧘 Meditation</span>
                            <span class="feature">💭 Mindfulness</span>
                            <span class="feature">🌱 Growth</span>
                        </div>
                    </div>
                </div>

                <!-- Silver Tier Companion -->
                <div class="companion-card">
                    <div class="card-header">
                        <img src="{{ url_for('static', filename='logos/Sky_a_premium_companion.png') }}" alt="Sky" class="companion-avatar">
                        <div class="companion-info">
                            <h3>Sky</h3>
                            <div class="tier-badge silver">Silver</div>
                        </div>
                    </div>
                    <div class="card-body">
                        <p>An empathetic guide for emotional healing, relationship advice, and advanced therapeutic techniques.</p>
                        <div class="features-list">
                            <span class="feature">💖 Relationships</span>
                            <span class="feature">🎭 Emotions</span>
                            <span class="feature">🔮 Intuition</span>
                        </div>
                    </div>
                </div>

                <!-- Gold Tier Companion -->
                <div class="companion-card">
                    <div class="card-header">
                        <img src="{{ url_for('static', filename='logos/Violet_a_Max_companion.png') }}" alt="Violet" class="companion-avatar">
                        <div class="companion-info">
                            <h3>Violet</h3>
                            <div class="tier-badge gold">Gold</div>
                        </div>
                    </div>
                    <div class="card-body">
                        <p>A premium spiritual guide offering advanced healing modalities, energy work, and transformational coaching.</p>
                        <div class="features-list">
                            <span class="feature">✨ Energy Work</span>
                            <span class="feature">🌟 Transformation</span>
                            <span class="feature">🎨 Creative Tools</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Security Section -->
        <div class="security-section">
            <div class="security-header">
                <div class="security-icon">🔒</div>
                <h3 class="security-title">Your Security Matters</h3>
                <p class="security-subtitle">Your privacy and security are our top priorities</p>
            </div>
            
            <div class="security-features">
                <div class="security-feature">
                    <div class="feature-icon">🚪</div>
                    <div class="feature-content">
                        <h4>Auto-Logout Protection</h4>
                        <p>Automatically logged out when browser closes</p>
                    </div>
                </div>
                
                <div class="security-feature">
                    <div class="feature-icon">💻</div>
                    <div class="feature-content">
                        <h4>Shared Computer Safety</h4>
                        <p>Always use "Logout" button on shared devices</p>
                    </div>
                </div>
                
                <div class="security-feature">
                    <div class="feature-icon">💬</div>
                    <div class="feature-content">
                        <h4>Private Conversations</h4>
                        <p>Your conversations are encrypted and secure</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/login-fixed.js') }}"></script>
    <script src="{{ url_for('static', filename='js/tier-lock.js') }}"></script>
    <script>
        // Set session flag for logged-in users (fresh login or page reload)
        sessionStorage.setItem('loggedIn', 'true');
        
        // Remove old aggressive session check that was causing auto-logout issues
        // Server-side session management handles authentication properly
        
        // AGGRESSIVE intro page styling enforcement
        function forceIntroStyling() {
            const body = document.body;
            const html = document.documentElement;
            
            // Force styles on both html and body
            const gradient = 'linear-gradient(135deg, #0a0e1a 0%, #1a202c 25%, #2d3748 50%, #1a202c 75%, #0a0e1a 100%)';
            
            html.style.background = gradient;
            html.style.backgroundAttachment = 'fixed';
            html.style.backgroundSize = '100% 100%';
            
            body.style.background = gradient;
            body.style.backgroundAttachment = 'fixed';
            body.style.backgroundSize = '100% 100%';
            body.style.minHeight = '100vh';
            body.style.margin = '0';
            body.style.padding = '0';
            body.style.fontFamily = 'system-ui, -apple-system, sans-serif';
            body.style.color = '#22d3ee';
            
            // Override any existing classes
            body.className = 'intro-page';
            
            console.log('🎨 AGGRESSIVE intro page styling applied');
        }
        
        // Apply immediately - before DOM is even ready
        forceIntroStyling();
        
        // Show page when everything is truly ready
        function showIntroWhenReady() {
            forceIntroStyling();
            document.documentElement.classList.add('ready');
        }
        
        // Wait for both DOM and all scripts to load
        let domReady = false;
        let scriptsReady = false;
        
        document.addEventListener('DOMContentLoaded', function() {
            domReady = true;
            checkIfFullyReady();
        });
        
        window.addEventListener('load', function() {
            scriptsReady = true;
            checkIfFullyReady();
        });
        
        function checkIfFullyReady() {
            if (domReady && scriptsReady) {
                // Small delay to ensure all dynamic content is added
                setTimeout(showIntroWhenReady, 200);
            }
        }
        
        // Multiple emergency fallbacks to ensure page always shows
        setTimeout(() => {
            if (!document.documentElement.classList.contains('ready')) {
                showIntroWhenReady();
            }
        }, 1000);
        
        setTimeout(() => {
            if (!document.documentElement.classList.contains('ready')) {
                document.documentElement.style.opacity = '1';
                document.documentElement.classList.add('ready');
            }
        }, 2000);
        
        // Ultimate safety: ensure page is ALWAYS visible after 3 seconds
        setTimeout(() => {
            document.documentElement.style.opacity = '1';
            document.documentElement.style.visibility = 'visible';
        }, 3000);
        
        // Apply styling on focus when navigating back
        window.addEventListener('focus', forceIntroStyling);
        
        // Show page immediately on any user interaction
        ['click', 'keydown', 'touchstart', 'mousemove'].forEach(event => {
            document.addEventListener(event, function() {
                if (!document.documentElement.classList.contains('ready')) {
                    showIntroWhenReady();
                }
            }, { once: true });
        });
        
        // Remove any duplicate profile buttons on page load
        document.addEventListener('DOMContentLoaded', function() {
            const profileButtons = document.querySelectorAll('a[href="/profile"]');
            if (profileButtons.length > 1) {
                profileButtons.forEach((button, index) => {
                    if (button.id !== 'main-profile-button') {
                        button.remove();
                    }
                });
            }
        });
        
        // Intro page uses default night mode - no theme switching needed
        
        
        // Add Sapphire navigation assistant function
        function toggleNavigationAssistant() {
            // Create interactive modal for Sapphire help
            const modal = document.createElement('div');
            modal.id = 'sapphireModal';
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px);
                display: flex; justify-content: center; align-items: center;
                z-index: 10000; animation: fadeIn 0.3s ease;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
                    border: 2px solid rgba(34, 211, 238, 0.4);
                    border-radius: 24px; padding: 32px; max-width: 550px; width: 92%;
                    max-height: 85vh; overflow-y: auto;
                    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6), 0 0 40px rgba(34, 211, 238, 0.1);
                    animation: slideUp 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                    backdrop-filter: blur(20px);
                ">
                    <div style="text-align: center; margin-bottom: 28px;">
                        <div style="position: relative; display: inline-block; margin-bottom: 18px;">
                            <img src="/static/logos/Sapphire.png" alt="Sapphire" 
                                 style="width: 68px; height: 68px; 
                                        border: 3px solid #22d3ee; 
                                        box-shadow: 0 8px 25px rgba(34, 211, 238, 0.3);
                                        animation: glow 2s ease-in-out infinite alternate;
                                        object-fit: contain;">
                            <div style="position: absolute; top: -2px; right: -2px; 
                                        width: 18px; height: 18px; background: #10b981; 
                                        border: 2px solid #0f172a; 
                                        animation: pulse 2s infinite;"></div>
                        </div>
                        <h3 style="color: #22d3ee; margin: 0 0 8px 0; font-size: 1.4rem; 
                                   font-weight: 700; letter-spacing: 0.5px;">💎 Ask Sapphire</h3>
                        <p style="color: #94a3b8; margin: 0 0 18px 0; font-size: 0.95rem; 
                                  opacity: 0.9;">Your professional AI navigation assistant</p>
                        
                        <div style="display: flex; justify-content: space-around; margin-bottom: 20px; text-align: center;">
                            <div style="flex: 1; padding: 10px;">
                                <div style="font-size: 1.5rem; margin-bottom: 5px;">💎</div>
                                <p style="font-size: 0.75rem; color: #94a3b8; margin: 0;">Navigation Help</p>
                            </div>
                            <div style="flex: 1; padding: 10px;">
                                <div style="font-size: 1.5rem; margin-bottom: 5px;">💬</div>
                                <p style="font-size: 0.75rem; color: #94a3b8; margin: 0;">Deep Conversations</p>
                            </div>
                            <div style="flex: 1; padding: 10px;">
                                <div style="font-size: 1.5rem; margin-bottom: 5px;">⭐</div>
                                <p style="font-size: 0.75rem; color: #94a3b8; margin: 0;">Personal Growth</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 22px;">
                        <input type="text" id="sapphireQuestion" placeholder="How can I help you navigate SoulBridge AI?" 
                               style="width: 100%; padding: 18px; border: 2px solid rgba(34, 211, 238, 0.4);
                                      border-radius: 14px; background: rgba(255, 255, 255, 0.08);
                                      color: white; font-size: 1rem; outline: none;
                                      backdrop-filter: blur(15px); transition: all 0.3s ease;
                                      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);"
                               onfocus="this.style.borderColor='rgba(34, 211, 238, 0.6)'; this.style.boxShadow='0 4px 25px rgba(34, 211, 238, 0.2)'"
                               onblur="this.style.borderColor='rgba(34, 211, 238, 0.4)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.2)'"
                               onkeypress="if(event.key==='Enter') askSapphire()">
                        <button onclick="askSapphire()" 
                                style="width: 100%; margin-top: 18px; padding: 16px;
                                       background: linear-gradient(135deg, #22d3ee 0%, #0891b2 100%);
                                       border: none; border-radius: 14px; color: white;
                                       font-weight: 600; cursor: pointer; transition: all 0.3s ease;
                                       font-size: 1rem; letter-spacing: 0.3px;
                                       box-shadow: 0 6px 20px rgba(34, 211, 238, 0.3);"
                                onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(34, 211, 238, 0.4)'"
                                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 6px 20px rgba(34, 211, 238, 0.3)'">
                            Ask Sapphire 💎
                        </button>
                    </div>
                    
                    <div style="background: rgba(34, 211, 238, 0.1); border-radius: 12px; padding: 15px; margin-bottom: 20px;">
                        <h4 style="color: #22d3ee; margin: 0 0 10px 0; font-size: 0.9rem;">💡 Try asking:</h4>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <button onclick="quickAsk('How do I reset my password?')" class="quickBtn">Reset Password</button>
                            <button onclick="quickAsk('Where are my settings?')" class="quickBtn">Settings</button>
                            <button onclick="quickAsk('How do I choose a companion?')" class="quickBtn">Choose Companion</button>
                            <button onclick="quickAsk('Where is billing?')" class="quickBtn">Billing</button>
                            <button onclick="quickAsk('What are the terms of service?')" class="quickBtn">Terms of Service</button>
                            <button onclick="quickAsk('What is the privacy policy?')" class="quickBtn">Privacy Policy</button>
                            <button onclick="quickAsk('What is the refund policy?')" class="quickBtn">Refund Policy</button>
                            <button onclick="quickAsk('What are the community guidelines?')" class="quickBtn">Community Rules</button>
                        </div>
                    </div>
                    
                    <style>
                        .quickBtn {
                            padding: 6px 12px;
                            background: rgba(34, 211, 238, 0.2);
                            border: 1px solid rgba(34, 211, 238, 0.4);
                            border-radius: 20px;
                            color: #22d3ee;
                            font-size: 0.75rem;
                            cursor: pointer;
                            transition: all 0.2s ease;
                            white-space: nowrap;
                        }
                        .quickBtn:hover {
                            background: rgba(34, 211, 238, 0.3);
                            transform: translateY(-1px);
                            box-shadow: 0 4px 12px rgba(34, 211, 238, 0.3);
                        }
                        /* Custom scrollbar for Sapphire modal */
                        #sapphireModal div:first-child::-webkit-scrollbar {
                            width: 8px;
                        }
                        #sapphireModal div:first-child::-webkit-scrollbar-track {
                            background: rgba(255, 255, 255, 0.1);
                            border-radius: 10px;
                        }
                        #sapphireModal div:first-child::-webkit-scrollbar-thumb {
                            background: linear-gradient(135deg, #22d3ee, #0891b2);
                            border-radius: 10px;
                            border: 2px solid transparent;
                            background-clip: content-box;
                        }
                        #sapphireModal div:first-child::-webkit-scrollbar-thumb:hover {
                            background: linear-gradient(135deg, #0891b2, #22d3ee);
                        }
                    </style>
                    
                    <div id="sapphireResponse" style="
                        background: rgba(255, 255, 255, 0.05); border-radius: 12px; 
                        padding: 15px; margin-bottom: 20px; display: none;
                        border-left: 4px solid #22d3ee;
                    ">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <img src="/static/logos/Sapphire.png" alt="Sapphire" 
                                 style="width: 24px; height: 24px; margin-right: 10px; object-fit: contain;">
                            <strong style="color: #22d3ee;">Sapphire:</strong>
                        </div>
                        <p id="sapphireAnswer" style="color: #e2e8f0; margin: 0; line-height: 1.4;"></p>
                    </div>
                    
                    <button onclick="closeSapphireModal()" 
                            style="width: 100%; padding: 12px; background: rgba(255, 255, 255, 0.1);
                                   border: 2px solid rgba(255, 255, 255, 0.2); border-radius: 12px;
                                   color: #94a3b8; cursor: pointer; transition: all 0.3s ease;"
                            onmouseover="this.style.background='rgba(255, 255, 255, 0.2)'"
                            onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                        Close
                    </button>
                </div>
            `;
            
            // Add enhanced styles for professional look
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                @keyframes slideUp { 
                    from { transform: translateY(40px) scale(0.95); opacity: 0; } 
                    to { transform: translateY(0) scale(1); opacity: 1; } 
                }
                @keyframes slideIn { 
                    from { transform: translateY(-20px); opacity: 0; } 
                    to { transform: translateY(0); opacity: 1; } 
                }
                @keyframes glow {
                    from { box-shadow: 0 8px 25px rgba(34, 211, 238, 0.3); }
                    to { box-shadow: 0 8px 35px rgba(34, 211, 238, 0.5); }
                }
                @keyframes pulse {
                    0%, 100% { transform: scale(1); opacity: 1; }
                    50% { transform: scale(1.1); opacity: 0.8; }
                }
                .quickBtn {
                    padding: 8px 16px; background: rgba(34, 211, 238, 0.15);
                    border: 1px solid rgba(34, 211, 238, 0.4); border-radius: 22px;
                    color: #22d3ee; font-size: 0.85rem; cursor: pointer;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); white-space: nowrap;
                    font-weight: 500; letter-spacing: 0.2px;
                }
                .quickBtn:hover {
                    background: rgba(34, 211, 238, 0.25); 
                    transform: translateY(-2px) scale(1.02);
                    border-color: rgba(34, 211, 238, 0.6);
                    box-shadow: 0 6px 20px rgba(34, 211, 238, 0.25);
                }
            `;
            document.head.appendChild(style);
            document.body.appendChild(modal);
            
            // Focus on input
            setTimeout(() => document.getElementById('sapphireQuestion').focus(), 100);
        }
        
        function quickAsk(question) {
            document.getElementById('sapphireQuestion').value = question;
            askSapphire();
        }
        
        async function askSapphire() {
            const question = document.getElementById('sapphireQuestion').value.trim();
            if (!question) return;
            
            // Show response area and loading state
            const responseDiv = document.getElementById('sapphireResponse');
            const answerP = document.getElementById('sapphireAnswer');
            responseDiv.style.display = 'block';
            answerP.textContent = '💎 Sapphire is thinking...';
            
            try {
                const response = await fetch('/api/sapphire-chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'same-origin',
                    body: JSON.stringify({
                        question: question,
                        current_page: window.location.pathname
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    answerP.textContent = data.response;
                } else {
                    answerP.textContent = '💎 Sorry, I encountered an issue. Please try again or use the navigation buttons above to find what you need.';
                }
                
            } catch (error) {
                console.error('Sapphire API error:', error);
                answerP.textContent = '💎 I\'m having connection issues. Please try refreshing the page or use the navigation buttons above to find what you need.';
            }
            
            // Clear input
            document.getElementById('sapphireQuestion').value = '';
        }
        
        // Removed placeholder getSapphireResponse - now using real OpenAI API
        
        function closeSapphireModal() {
            const modal = document.getElementById('sapphireModal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
        }
        
        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.id === 'sapphireModal') {
                closeSapphireModal();
            }
        });
        
        // BANKING SECURITY: Clear session when user navigates away (like bank sites)
        let sessionCleared = false;
        let navigatingInternally = false;
        
        // Track internal navigation to avoid clearing session for app navigation
        document.addEventListener('click', function(e) {
            const link = e.target.closest('a, button');
            if (link) {
                // Check for internal links
                if (link.href) {
                    try {
                        const url = new URL(link.href);
                        const currentHost = window.location.hostname;
                        if (url.hostname === currentHost || url.hostname === 'www.soulbridgeai.com' || url.hostname === 'soulbridgeai.com') {
                            console.log('🔄 Internal navigation detected:', url.pathname);
                            navigatingInternally = true;
                            setTimeout(() => { navigatingInternally = false; }, 2000);
                        }
                    } catch (e) {
                        // Invalid URL, might be relative - assume internal
                        navigatingInternally = true;
                        setTimeout(() => { navigatingInternally = false; }, 2000);
                    }
                }
                // Check for buttons that trigger navigation (like profile button)
                else if (link.onclick || link.getAttribute('onclick')) {
                    console.log('🔄 Button navigation detected');
                    navigatingInternally = true;
                    setTimeout(() => { navigatingInternally = false; }, 2000);
                }
            }
        });
        
        // Also track programmatic navigation
        const originalPushState = history.pushState;
        const originalReplaceState = history.replaceState;
        
        history.pushState = function() {
            navigatingInternally = true;
            setTimeout(() => { navigatingInternally = false; }, 2000);
            return originalPushState.apply(history, arguments);
        };
        
        history.replaceState = function() {
            navigatingInternally = true;
            setTimeout(() => { navigatingInternally = false; }, 2000);
            return originalReplaceState.apply(history, arguments);
        };
        
        function clearSession() {
            // Only clear session if not navigating internally within the app
            if (!sessionCleared && !navigatingInternally) {
                sessionCleared = true;
                console.log('🔒 SECURITY: Clearing session due to external navigation/page close');
                fetch('/api/clear-session', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    keepalive: true // Ensures request completes even if page is closing
                }).catch(e => console.log('Session clear request sent'));
            } else if (navigatingInternally) {
                console.log('🔄 SECURITY: Keeping session for internal navigation');
            }
        }
        
        // DISABLED: Overly aggressive session clearing was causing login loops
        // Only clear session on explicit logout, not on navigation/tab switching
        // window.addEventListener('beforeunload', clearSession);
        // window.addEventListener('pagehide', clearSession);
        // window.addEventListener('visibilitychange', function() {
        //     if (document.visibilityState === 'hidden') {
        //         clearSession();
        //     }
        // });
        // window.addEventListener('blur', clearSession);
        
        // Netflix-style "Are you still there?" warning (9 minutes - before 10 minute server timeout)
        setTimeout(() => {
            showStillThereModal();
        }, 9 * 60 * 1000); // 9 minutes
        
        function showStillThereModal() {
            // Create Netflix-style overlay
            const overlay = document.createElement('div');
            overlay.id = 'stillThereOverlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(10px);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease;
            `;
            
            overlay.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
                    border: 2px solid #00ffff;
                    border-radius: 16px;
                    padding: 40px;
                    text-align: center;
                    max-width: 400px;
                    box-shadow: 0 20px 40px rgba(0, 255, 255, 0.2);
                    animation: slideIn 0.3s ease;
                ">
                    <div style="font-size: 2rem; margin-bottom: 20px;">👋</div>
                    <h2 style="color: #00ffff; margin-bottom: 15px; font-size: 1.5rem;">Are you still there?</h2>
                    <p style="color: #94a3b8; margin-bottom: 25px; line-height: 1.6;">
                        Your session will expire in <span id="countdown" style="color: #00ffff; font-weight: bold;">60</span> seconds for security.
                    </p>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="continueSession()" style="
                            background: linear-gradient(135deg, #00ffff, #0891b2);
                            color: #000;
                            border: none;
                            padding: 12px 24px;
                            border-radius: 8px;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            Yes, I'm here
                        </button>
                        <button onclick="logOut()" style="
                            background: transparent;
                            color: #94a3b8;
                            border: 1px solid #374151;
                            padding: 12px 24px;
                            border-radius: 8px;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.borderColor='#6b7280'" onmouseout="this.style.borderColor='#374151'">
                            Log me out
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(overlay);
            
            // Start countdown
            let timeLeft = 60;
            const countdownElement = document.getElementById('countdown');
            const countdownInterval = setInterval(() => {
                timeLeft--;
                if (countdownElement) {
                    countdownElement.textContent = timeLeft;
                }
                
                if (timeLeft <= 0) {
                    clearInterval(countdownInterval);
                    logOut();
                }
            }, 1000);
            
            // Store interval so we can clear it
            overlay.countdownInterval = countdownInterval;
        }
        
        function continueSession() {
            // Remove the modal
            const overlay = document.getElementById('stillThereOverlay');
            if (overlay) {
                clearInterval(overlay.countdownInterval);
                overlay.remove();
            }
            
            // Refresh the session by making a simple request
            fetch('/api/session-refresh', { method: 'POST' })
                .then(() => {
                    console.log('✅ Session refreshed - you can continue using the site');
                    // Set up the next warning in 9 minutes
                    setTimeout(() => {
                        showStillThereModal();
                    }, 9 * 60 * 1000);
                })
                .catch(() => {
                    console.log('Session refresh failed, but continuing anyway');
                });
        }
        
        function logOut() {
            // Clear session and redirect to login
            clearSession();
            window.location.href = '/login';
        }
        
        console.log('🔒 BANKING SECURITY: Session protection active - sessions clear on navigation/inactivity');


        // ====== DISABLED OLD TRIAL TIMER SYSTEM - Using new system to prevent conflicts ======
        // DISABLED: const ring = document.querySelector('.progress-ring-circle');
        // DISABLED: const ringText = document.getElementById('ring-text');
        // DISABLED: const ringWrapper = document.getElementById('trial-ring-container');

        // ✨ NEW ENHANCED TIMER SYSTEM - Simple and conflict-free
        let timerUpdateInterval;

        function initializeEnhancedTimer() {
            const container = document.getElementById('trial-timer-container');
            if (!container) return;

            console.log('🚀 Initializing enhanced timer on intro page');
            
            // Beautiful entrance animation
            container.style.display = 'block';
            container.style.opacity = '0';
            container.style.transform = 'scale(0.8) translateY(-20px)';
            container.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            
            setTimeout(() => {
                container.style.opacity = '1';
                container.style.transform = 'scale(1) translateY(0)';
            }, 100);
        }

        function updateSimpleTimer(trialRemaining) {
            const timerElement = document.getElementById('simple-timer');
            const displayElement = document.getElementById('timer-display');
            
            if (!timerElement || !displayElement) return;
            
            if (trialRemaining <= 0) {
                timerElement.style.display = 'none';
                return;
            }
            
            // Show timer
            timerElement.style.display = 'block';
            
            // Calculate time components (auto-detect seconds vs milliseconds)
            const totalSeconds = Math.floor(trialRemaining > 1000000 ? trialRemaining / 1000 : trialRemaining);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            
            // Update display
            displayElement.textContent = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Update warning states
            timerElement.classList.remove('warning', 'critical');
            const timeInSeconds = trialRemaining > 1000000 ? trialRemaining / 1000 : trialRemaining;
            if (timeInSeconds < 600) { // < 10 minutes
                timerElement.classList.add('critical');
            } else if (timeInSeconds < 1800) { // < 30 minutes
                timerElement.classList.add('warning');
            }
        }

        async function refreshUserStatus() {
            try {
                const res = await fetch('/api/user-info');
                const data = await res.json();

                if (!data.success) {
                    console.error('Failed to get user info:', data.error);
                    return;
                }

                const { trial_active, trial_remaining, effective_plan, trial_used_permanently } = data;

                // Update trial badge and simple timer
                const trialBadge = document.getElementById('trial-badge');
                const timerElement = document.getElementById('simple-timer');
                
                if (trial_active && trial_remaining > 0) {
                    // Show trial badge and update timer
                    if (trialBadge) trialBadge.style.display = 'inline-flex';
                    updateSimpleTimer(trial_remaining);
                } else {
                    // AGGRESSIVE TIMER CLEANUP - Remove all timer elements permanently
                    if (trialBadge) {
                        trialBadge.remove(); // Completely remove from DOM
                    }
                    if (timerElement) {
                        timerElement.remove(); // Completely remove from DOM
                    }
                    
                    // Remove enhanced timer container completely
                    const enhancedTimer = document.getElementById('trial-timer-container');
                    if (enhancedTimer) {
                        enhancedTimer.remove(); // Completely remove from DOM
                    }
                    
                    // Find and remove ALL timer-related elements
                    const allTimerElements = document.querySelectorAll('[id*="timer"], [class*="timer"], [id*="trial"], [class*="trial"]');
                    allTimerElements.forEach(el => {
                        if (!el.closest('.action-btn') && !el.closest('.card')) { // Don't remove action buttons or cards
                            console.log('🗑️ INTRO: Removing timer element:', el.id || el.className);
                            el.remove();
                        }
                    });
                    
                    console.log('🔒 INTRO: ALL timer elements permanently removed - trial expired');
                }


            } catch (error) {
                console.error('Error refreshing user status:', error);
            }
        }


        // DISABLED: Start refreshing user status - causing timer flickering
        // setInterval(refreshUserStatus, 5000);  // auto refresh every 5 sec - DISABLED
        refreshUserStatus(); // Run once on load only

        // Smooth scroll to companions section
        function scrollToCompanions() {
            const companionsSection = document.querySelector('.content-container');
            if (companionsSection) {
                companionsSection.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }
    </script>
    <script src="/static/js/mini-assistant-modal.js"></script>
</body>
</html>
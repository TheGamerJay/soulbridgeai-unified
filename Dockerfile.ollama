FROM ollama/ollama:latest

# Environment variables for Railway deployment
ENV OLLAMA_HOST=0.0.0.0:11434
ENV OLLAMA_KEEP_ALIVE=30m
ENV OLLAMA_NUM_PARALLEL=1
ENV OLLAMA_MAX_LOADED_MODELS=1
ENV OLLAMA_USE_GPU=0

EXPOSE 11434

# Create simple startup script - no model download during build
RUN echo '#!/bin/bash\n\
set -e\n\
echo "Starting Ollama server..."\n\
ollama serve' > /usr/local/bin/start-ollama.sh && chmod +x /usr/local/bin/start-ollama.sh

CMD ["/usr/local/bin/start-ollama.sh"]